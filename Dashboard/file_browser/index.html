<!doctype html>
<html ng-app="MyAPI_Connector">
   <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
         <title>File Browser</title>
         
         <link rel="stylesheet" type="text/css" href="../mystyle.css">
         <link rel="stylesheet" href="common/css/normalize.min.css">
         <link rel="stylesheet" href="common/css/main.min.css">
         <link rel="stylesheet" href="common/css/bootstrap.min.css">
         <link rel="stylesheet" href="common/css/bootstrap-responsive.min.css">
         <link rel="stylesheet" href="common/css/elasticjs.css">
         <script src="common/lib/modernizr-2.6.1.min.js"></script>
         <script src="common/lib/underscore.min.js"></script>
         <!-- project dependency libs -->
         <script src="common/lib/angular.min.js"></script>
         <script src="elasticsearch-js/elasticsearch.js"></script>
         <script src="elasticsearch-js/elasticsearch.angular.js"></script>
         
         <!-- project specific files -->
         <script src="js/app.essimple.js"></script>
         
         <!-- manifest download -->
         <script src="common/js/filesaver.min.js"></script>
         
         <!-- pie chart -->
         <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
   </head>
   
   <style>
      body{
         font-family: Arial;
      }

      .chart {
         background: #fff;
         font: 10px;
      }

      .axis path, .axis line {
         fill: none;
         stroke: #000;
         stroke-width: 2px;
         shape-rendering: crispEdges;
      }

      .button {
         border: none;
         color: black;
         text-align: center;
         text-decoration: none;
         display: inline-block;
         margin: 1px 1px;
         cursor: pointer;
      }

      hr {
         border-width: 2px;
         margin-top: 0.25em;
         margin-bottom: 0.5em;
      }
   </style>
   
   <div class="imgcgl">
      <div class="imgcontainer">
         <a href="https://genomics.soe.ucsc.edu/">
            <img src="../UCSC-Logo-genomics-web-80.png" alt="University of California Santa Cruz" class="imglogo" style="padding: 10px">
         </a>
      </div>
      <div class="cglcontainer" style="float: right;">
         <a href="https://cgl.genomics.ucsc.edu/" class="text">Computational Genomics Laboratory</a>
      </div>
   </div>
   <ul class="header text">
      <li><a href="../index.html">Home</a></li>
      <li class="dropbtn"><a href="../projects.html">Analysis Dashboard</a></li>
      <li class="dropbtn"><a href="index.html">File Browser</a></li>
      <li><a href="https://ucsc-cgl.atlassian.net/wiki/">Wiki</a></li>
      <li><a href="../about.html">About</a></li>
   </ul>
   
   <body ng-controller="API_Controller">
      
   
      <div>  
         <div class="container-fluid">
            <div class="row-fluid"> 
               <div class="span2 well text">
                  <ul class="nav nav-sidebar">
                     <li class="divider"></li>
                     
                        <li class="nav-header">Center</li>
                        <div ng-repeat="item in results.centerName.terms">
                           <input type="checkbox" ng-checked="hasCheck('center_name', item['term'])" ng-click="checking('center_name', item['term'])">
                              {{item['term']}} <span class="muted">{{item['count']}}</span>
                           </input>
                        </div>
                        <li class="divider"></li> 
                        
<!-- 
                        <li class="nav-header">Program</li>
                        <div ng-repeat="item in results.program.buckets">
                           <input type="checkbox" ng-checked="hasCheck('program', item['key'])" ng-click="checking('program', item['key'])">
                              {{item['key']}} <span class="muted">{{item['doc_count']}}</span>
                           </input>  
                        </div>
                        <li class="divider"></li> 
 -->
      
                        <li class="nav-header">Project</li>
                        <div ng-repeat="item in results.projectCode.terms">
                           <input type="checkbox" ng-checked="hasCheck('project', item['term'])" ng-click="checking('project', item['term'])">
                              {{item['term']}} <span class="muted">{{item['count']}}</span>
                           </input>  
                        </div>
                        <li class="divider"></li> 
      
                        <li class="nav-header">Workflow</li>
                        <div ng-repeat="item in results.workFlow.terms">
                           <input type="checkbox" ng-checked="hasCheck('workflow', item['term'])" ng-click="checking('workflow', item['term'])">
                              {{item['term']}} <span class="muted">{{item['count']}}</span>
                           </input>    
                        </div>
                        <li class="divider"></li> 
         
                        <li class="nav-header">Analysis Type</li>
                        <div ng-repeat="item in results.analysisType.terms">
                           <input type="checkbox" ng-checked="hasCheck('analysis_type', item['term'])"  ng-click="checking('analysis_type', item['term'])">
                              {{item['term']}} <span class="muted">{{item['count']}}</span>
                           </input>    
                        </div>
                        <li class="divider"></li> 
         
                        <li class="nav-header">Specimen Type</li>
                        <div ng-repeat="item in results.specimenType.terms">
                           <input type="checkbox" ng-checked="hasCheck('specimen_type', item['term'])" ng-click="checking('specimen_type', item['term'])">
                              {{item['term']}} <span class="muted">{{item['count']}}</span>
                           </input>    
                        </div>
                        <li class="divider"></li>         
         
                        <li class="nav-header">File Type</li>
                        <div ng-repeat="item in results.fileFormat.terms">
                           <input type="checkbox" ng-checked="hasCheck('file_type', item['term'])" ng-click="checking('file_type', item['term'])">
                              {{item['term']}} <span class="muted">{{item['count']}}</span>
                           </input> 
                        </div>
                        <li class="divider"></li>    
                         
                     <li class="divider"></li>     
                  </ul>
               </div>
               
               <center>
               <table>
                  <td id="piechartWorkflow"></td>
                  <td id="piechartAnalysis"></td>
                  <td id="piechartFile"></td>
               </table>
               </center>
               <hr>
               
               <div class="span5 text">
                  <div class="table-responsive">
                     <table class="table table-striped">
         
                        <thead>
                           <tr>
                              <th>Project</th>
                              <th>Donor</th>
                              <th>Specimen Type</th>
                              <th>Analysis Type</th>
                              <th>Workflow</th>
                              <th>File Type</th>
                              <th>File</th>
                              <th>Download ID</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr ng-repeat="item in hits">
                              <td>{{item['donors'][0]['projectCode']}}</td>
                              <td>{{item['donors'][0]['donorId']}}</td>
                              <td>{{item['donors'][0]['specimenType'][0]}}</td>
                              <td>{{item['dataCategorization']['dataType']}}</td>
                              <td>{{item['dataCategorization']['experimentalStrategy']}}</td>
                              <td>{{item['fileCopies'][0]['indexFile']['fileFormat']}}</td>
                              <td>{{item['fileCopies'][0]['indexFile']['fileName']}}</td>
                              <td>{{item['fileCopies'][0]['indexFile']['objectId']}}</td>
                           </tr>
                        </tbody>
                  
                     </table>
                  </div>
               </div>
            </div>
         </div>
      </div>
      
      <center>
         <div>  
            <button class="button" ng-click="refresh(-1);" ng-show="backPages"> {{back}} </span></button>
               <span placeholder="{{next}}"> <button class="button" ng-show="nextPages" ng-click="refresh(1);">{{next}} </button>
                  Page: {{offset}} {{of}} {{poutof}}
               </span>
            <button class="button"><span ng-click="downloadfile();">Download Manifest</span></button>
         </div>
      </center>
      
      
      

   
      <footer class="text">
         <section style="color: white">UCSC Genomics Institute - Analysis Core
            <ul class="header" style="float: right; font-size:50%; padding: 4px;">
               <li><a href="index.html">Home</a></li>
               <li><a href="projects.html">Projects</a></li>
               <li><a href="https://ucsc-cgl.atlassian.net/wiki/">Wiki</a></li>
               <li><a href="about.html">About</a></li>
            </ul>
         </section>
      </footer>
      
   </body>
</html>
